<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Healthcare Quality Grid — QuXAT QSAS</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>
  <body>
    <script src="assets/js/storage.js"></script>
    <script src="assets/js/branding.js"></script>
    <script>
      (function(){
        // Navigation links open sections in Streamlit or fall back to static pages
        const links = document.querySelectorAll('a[data-section]');
        links.forEach(a => {
          a.addEventListener('click', function(e){
            e.preventDefault();
            const s = a.dataset.section;
            const topWin = window.top || window.parent || window;
            const base = topWin.location.origin;
            const url = base + '/?section=' + encodeURIComponent(s);
            const port = String(topWin.location.port || '');
            const host = String(topWin.location.hostname || '');
            const isStreamlit = host.includes('streamlit') || ['8501','8502','8503','8504'].includes(port);
            if (isStreamlit) {
              try { const w = topWin.open(url, '_blank'); if (w && w.focus) w.focus(); } catch(err) {
                try { const w2 = window.open(url, '_blank'); if (w2 && w2.focus) w2.focus(); } catch(e) {}
              }
            } else {
              let fallback = 'hq-grid.html';
              // Route to specific static pages when not in Streamlit
              // HQ Grid Admin removed
              if (s && s.toLowerCase().includes('register for the healthcare quality grid')) fallback = 'hq-register.html';
              else if (s && s.toLowerCase() === 'admin') fallback = 'admin.html';
              else if (s && s.toLowerCase().includes('user')) fallback = 'user.html';
              else if (s && s.toLowerCase().includes('home')) fallback = 'index.html';
              try { const w = topWin.open(fallback, '_blank'); if (w && w.focus) w.focus(); } catch(e) {
                try { const w2 = window.open(fallback, '_blank'); if (w2 && w2.focus) w2.focus(); } catch(_) {}
              }
            }
          });
        });
      })();
    </script>

    <header class="site-header">
      <div class="brand-bar container wide">
        <div class="brand-left">
          <img id="brandLogo" class="brand-logo" alt="QuXAT" src="assets/QuXAT%20Logo%20Facebook.png" />
          <div>
            <div class="brand-title">Healthcare Quality Grid</div>
            <div class="subtitle">Assess Quality, Safety, and Compliance credentials</div>
          </div>
        </div>
        <!-- Navigation removed per request -->
      </div>
    </header>

    <main class="container wide">
      <section class="card">
        <h2>QuXAT Healthcare Quality Grid</h2>
        <p class="hint">QuXAT Healthcare Quality Grid is based on Quality, Safety and Compliance standards. The Grid contains organizations that comply on these 3 pillar of standardization. Recognition with QuXAT Healthcare Quality Grid will open opportunities for industries to network among organizations that stand by Quality, Safety and Compliance requirements.</p>
        <div id="gridIntro" class="card info">
          <h3>Guideline Domains</h3>
          <ul class="domain-table">
            <li class="domain-row">
              <span class="domain-name">Quality</span>
              <span class="domain-desc">— Clinical governance, evidence‑based care, audits, feedback.</span>
            </li>
            <li class="domain-row">
              <span class="domain-name">Safety</span>
              <span class="domain-desc">— Infection control, medication safety, incident reporting, training.</span>
            </li>
            <li class="domain-row">
              <span class="domain-name">Compliance</span>
              <span class="domain-desc">— Licensing, privacy, accreditation alignment, emergency preparedness.</span>
            </li>
          </ul>
        </div>
      </section>

      <section class="card">
        <h3>Quality Grid Marketplace — Industries & Registered Organizations</h3>
        <p class="hint">QuXAT Healthcare Quality Grid is a market place where all stakeholder of quality healthcare delivery can connect and network with similar quality centric ideals to build business relationships. Quality grid should be the platform where organization that have proven quality credentials can reach to similar organizations through the quality grid portal. The various industries registered with the quality grid are mentioned on the quality grid homepage under respective industry heads.</p>
        <div id="gridIndustryEmpty" class="empty" hidden>No verified registrations yet.</div>
        <div id="gridIndustryMount" class="grid" style="display:grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap:12px;"></div>
      </section>

      <!-- Registration section removed from Healthcare Quality Grid page -->

      

      <!-- Score bar and suggestions removed per request -->
    </main>

    <script>
      (function(){
        // Registration form and checklist logic removed from this page.

        // Checklist import removed: selector and rendering logic deleted

        // Marketplace: group approved registrations under industry heads and provide Connect actions
        function normalizeIndustry(raw) {
          const s = String(raw || '').toLowerCase();
          if (!s) return 'Other Healthcare';
          if (s.includes('hospital')) return 'Hospitals';
          if (s.includes('diagnostic') || s.includes('laborator')) return 'Diagnostic Laboratories';
          if (s.includes('pharma') || s.includes('pharmacy')) return 'Pharmacies';
          if (s.includes('dental')) return 'Dental Clinics';
          if (s.includes('health') && s.includes('center')) return 'Health Centers';
          if (s.includes('clinic')) return 'Clinics';
          return 'Other Healthcare';
        }

        function renderIndustryGrid() {
          const mount = document.getElementById('gridIndustryMount');
          const empty = document.getElementById('gridIndustryEmpty');
          if (!mount || !empty) return;
          let regs = [];
          try { regs = (typeof getApprovedGridRegistrations === 'function') ? getApprovedGridRegistrations() : []; } catch(e) { regs = []; }
          mount.innerHTML = '';
          empty.hidden = regs.length !== 0;
          if (!regs.length) return;
          const byHead = new Map();
          regs.forEach(r => {
            const head = normalizeIndustry(r.orgType);
            if (!byHead.has(head)) byHead.set(head, []);
            byHead.get(head).push(r);
          });
          const heads = Array.from(byHead.keys()).sort((a,b) => a.localeCompare(b));
          heads.forEach(head => {
            const items = (byHead.get(head) || []).sort((a,b) => String(a.orgName||'').localeCompare(String(b.orgName||'')));
            const card = document.createElement('div');
            card.className = 'card info';
            const title = document.createElement('div');
            title.className = 'item-title';
            title.textContent = `${head} (${items.length})`;
            const list = document.createElement('ul');
            list.className = 'list';
            items.forEach(r => {
              const li = document.createElement('li');
              const top = document.createElement('div');
              top.className = 'item-title';
              top.textContent = r.orgName || 'Organization';
              const sub = document.createElement('div');
              sub.className = 'item-sub';
              const idLine = r.regCode ? ` • ID: ${r.regCode}` : '';
              sub.textContent = `Classification: ${r.classification || '-'}` + idLine;
              const actions = document.createElement('div');
              actions.className = 'item-actions';
              const connect = document.createElement('a');
              connect.href = `mailto:${encodeURIComponent(r.email || '')}?subject=${encodeURIComponent('QuXAT Healthcare Quality Grid • Connection Request')}`;
              connect.className = 'btn';
              connect.textContent = 'Connect';
              const details = document.createElement('button');
              details.className = 'btn';
              details.textContent = 'View Achievements';
              details.onclick = () => {
                const overlay = document.createElement('div'); overlay.className = 'modal-overlay';
                const card = document.createElement('div'); card.className = 'modal-card';
                const title = document.createElement('div'); title.className = 'modal-title'; title.textContent = `${r.orgName || 'Organization'} • ${normalizeIndustry(r.orgType)}`;
                const sub = document.createElement('div'); sub.className = 'modal-sub';
                const acc = Array.isArray(r.accreditations) && r.accreditations.length ? `Accreditations: ${r.accreditations.join(', ')}` : '';
                const locs = [r.orgCountry,r.orgState,r.orgDistrict,r.orgCity].filter(Boolean).join(', ');
                const idLine = r.regCode ? `ID: ${r.regCode}` : '';
                sub.textContent = [idLine, locs ? `Location: ${locs}` : '', r.email ? `Email: ${r.email}` : '', acc].filter(Boolean).join(' • ');
                const h = document.createElement('h3'); h.textContent = 'Selected Guidelines';
                const ul = document.createElement('ul'); ul.className = 'list';
                (Array.isArray(r.selectedMetrics) ? r.selectedMetrics : []).forEach(m => { const li = document.createElement('li'); li.textContent = `- ${m.name}`; ul.appendChild(li); });
              const actions = document.createElement('div'); actions.className = 'modal-actions';
                const close = document.createElement('button'); close.className = 'btn'; close.textContent = 'Close'; close.onclick = () => { document.body.removeChild(overlay); };
                actions.appendChild(close);
              // Append header and selected guidelines first
              card.append(title, sub, h, ul);
              // Append suggested improvements after header/guidelines
              if (Array.isArray(r.suggestions) && r.suggestions.length) {
                const h2 = document.createElement('h3'); h2.textContent = 'Suggested Improvements';
                const sugUl = document.createElement('ul'); sugUl.className = 'list';
                r.suggestions.forEach(s => { const li = document.createElement('li'); li.textContent = `- ${s}`; sugUl.appendChild(li); });
                card.append(h2, sugUl);
              }
              // Finally, actions
              card.append(actions);
              overlay.appendChild(card); document.body.appendChild(overlay);
              };
              actions.append(connect, details);
              li.append(top, sub, actions);
              list.appendChild(li);
            });
            card.append(title, list);
            mount.appendChild(card);
          });
        }

        // Registration submit handler removed

        // Download report and reset controls removed

        // Re-render checklists removed; only render marketplace grid
        renderIndustryGrid();
      })();
    </script>
  </body>
</html>
