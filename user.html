<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>QuXAT Healthcare Organization Self Assessment — Ver 1 (7 Nov 2025)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="brand-bar container wide">
        <div class="brand-left">
          <img id="brandLogo" class="brand-logo" alt="QuXAT" src="assets/QuXAT%20Logo%20Facebook.png" />
          <div>
            <div class="brand-title">QuXAT Self Assessment — Ver 1</div>
            <div class="subtitle">Select metrics to compute your QSAS score • 7 Nov 2025</div>
          </div>
        </div>
        <nav class="brand-nav">
          <a href="#" data-section="Home">Home</a>
        </nav>
      </div>
    </header>
    <script>
      (function(){
        const links = document.querySelectorAll('a[data-section]');
        links.forEach(a => {
          a.addEventListener('click', function(e){
            e.preventDefault();
            const s = a.dataset.section;
            const topWin = window.top || window.parent || window;
            const base = topWin.location.origin;
            const url = base + '/?section=' + encodeURIComponent(s);
            const port = String(topWin.location.port || '');
            const host = String(topWin.location.hostname || '');
            const isStreamlit = host.includes('streamlit') || port === '8501' || port === '8502';
            if (isStreamlit) {
              // Open Streamlit section in a fresh tab
              try {
                const w = topWin.open(url, '_blank');
                if (w && typeof w.focus === 'function') w.focus();
              } catch(err) {
                try {
                  const w2 = window.open(url, '_blank');
                  if (w2 && typeof w2.focus === 'function') w2.focus();
                } catch(e) {}
              }
            } else {
              // Static fallback
              let fallback = (s && s.toLowerCase().includes('admin')) ? 'admin.html' : 'user.html';
              try {
                const w = topWin.open(fallback, '_blank');
                if (w && typeof w.focus === 'function') w.focus();
              } catch(e) {
                try {
                  const w2 = window.open(fallback, '_blank');
                  if (w2 && typeof w2.focus === 'function') w2.focus();
                } catch(_) {}
              }
            }
          });
        });
      })();
    </script>

    <main class="container wide">
      <section class="card">
        <h2>Start Self Assessment of your Organization</h2>
        <form id="startForm" class="form-grid">
          <label>
            Email ID
            <input type="email" id="userEmail" placeholder="you@example.com" required />
          </label>
          <details class="card info" style="margin-top:8px;">
            <summary>Enter Organization Details</summary>
            <div class="form-grid two" style="margin-top:8px;">
              <!-- Category and Organization type inputs removed per request -->
              <label title="If left blank, reports show ‘Details Not Provided by Self - Assessment User’.">
                Organization Name
                <input type="text" id="orgName" placeholder="Your organization" title="If left blank, reports show ‘Details Not Provided by Self - Assessment User’." />
              </label>
              <label title="If left blank, reports show ‘Details Not Provided by Self - Assessment User’.">
                Representative Name
                <input type="text" id="repName" placeholder="Full name of representative" title="If left blank, reports show ‘Details Not Provided by Self - Assessment User’." />
              </label>
              <label title="If left blank, reports show ‘Details Not Provided by Self - Assessment User’.">
                Representative Designation
                <input type="text" id="repDesignation" placeholder="Designation/Title" title="If left blank, reports show ‘Details Not Provided by Self - Assessment User’." />
              </label>
            </div>
          </details>
          <!-- Removed Industry Categories table from User page (now shown on Home) -->
          <div class="actions">
            <button type="submit" class="btn btn-primary">Proceed</button>
          </div>
          <p class="hint">Enter a valid email to begin. Optional details can be skipped — wherever not provided, we’ll mark “Details Not Provided by Self - Assessment User” in reports and certificates. For assistance or to obtain a verified certificate, contact quxat.team@gmail.com.</p>
        </form>
      </section>
      <details id="qiLegend" class="card info">
        <summary>Quality Improvement classifications</summary>
        <ul class="list legend-list">
          <li>
            <div class="item-title">Exemplary Quality Improvement <span class="badge badge-exemplary">Exemplary</span></div>
            <div class="item-sub">Consistently high performance with mature systems; focus on sustaining gains and outcome measures.</div>
          </li>
          <li>
            <div class="item-title">Strong Quality Improvement <span class="badge badge-strong">Strong</span></div>
            <div class="item-sub">Well-established practices; continue standardization and targeted improvements through audits and Plan–Do–Study–Act cycles.</div>
          </li>
          <li>
            <div class="item-title">Developing Quality Improvement <span class="badge badge-developing">Developing</span></div>
            <div class="item-sub">Growing capabilities; formalize procedures, owners, and indicators; expand training and competency checks.</div>
          </li>
          <li>
            <div class="item-title">Early Quality Improvement <span class="badge badge-early">Early</span></div>
            <div class="item-sub">Foundational stage; establish governance, documentation, and regular audits to build consistency.</div>
          </li>
          <li>
            <div class="item-title">Needs Immediate Improvement <span class="badge badge-needs-improvement">Immediate</span></div>
            <div class="item-sub">Critical gaps; address safety risks, implement basic controls, and define a 90-day roadmap with leadership accountability.</div>
          </li>
        </ul>
      </details>

      <section id="prevAssessmentPanel" class="card info" hidden>
        <h3>Previous Assessment Found</h3>
        <p id="prevAssessmentSummary" class="hint"></p>
        <div class="actions">
          <button id="continuePrevBtn" class="btn btn-primary">Continue previous</button>
          <button id="startNewBtn" class="btn">Start new assessment</button>
        </div>
      </section>

      <section class="card">
        <h2>Select Quality Improvement Metrics</h2>
        <p class="hint">Answer each metric with Yes or No. Each “Yes” awards the metric’s assigned points.</p>
        <div id="checklistChooser" class="card info" hidden>
          <h3>Choose a Checklist</h3>
          <div id="checklistsForUser" class="actions"></div>
          <p class="hint">Select a checklist to begin your self assessment.</p>
        </div>
        <div id="gateMsg" class="empty">Please enter your email and start the assessment.</div>
        <div id="userEmpty" class="empty" hidden>No metrics defined by Admin yet.</div>
        <ul id="userMetrics" class="list checklist" hidden></ul>
        <div class="score-row">
          <div class="actions">
            <button id="submitVerificationBtn" class="btn btn-primary">Submit for Verification</button>
            <button id="resetSelectionBtn" class="btn">Reset Selection</button>
            <button id="downloadUnverifiedBtn" class="btn">Download Unverified Report</button>
            <button id="downloadVerifiedBtn" class="btn" hidden>Download Verified Report</button>
            <button id="downloadCertificateBtn" class="btn" hidden>Download Certificate</button>
            <button id="printCertificateBtn" class="btn" hidden>Print Certificate</button>
          </div>
        </div>
        
        <section id="qualityCard" class="card certificate" hidden>
          <div class="certificate-header">
            <img id="certificateLogo" class="certificate-logo" alt="QuXAT Logo" src="assets/QuXAT%20Logo%20Facebook.png" />
            <div>
              <div class="certificate-title">QuXAT Self Assessment Certificate</div>
              <div class="certificate-subtitle">Quality Score Card</div>
            </div>
          </div>
          <div class="certificate-body">
            <div class="certificate-rows">
              <div class="certificate-row"><span class="label">Participant Email</span><span id="certEmail">—</span></div>
              <div class="certificate-row"><span class="label">Organization</span><span id="certOrg">—</span></div>
              <div class="certificate-row"><span class="label">Organization Type</span><span id="certOrgType">—</span></div>
              <div class="certificate-row"><span class="label">Checklist</span><span id="certChecklist">—</span></div>
              <div class="certificate-row"><span class="label">Checklist Description</span><span id="certChecklistDesc">—</span></div>
              <div class="certificate-row"><span class="label">Date</span><span id="certDate">—</span></div>
              <div class="certificate-row"><span class="label">Selected Metrics</span><span id="certSelectedCount">0</span></div>
              <div class="certificate-row"><span class="label">Status</span><span id="certStatus">Not submitted</span></div>
            </div>
            <div class="certificate-score">
              <div class="score-value"><span id="certScore">0</span></div>
              <div class="score-extra">
                <div>Score Percent: <strong><span id="certPercent">0</span>%</strong></div>
                <div>Classification: <span id="certClass" class="badge">—</span></div>
              </div>
            </div>
          </div>
        </section>
      </section>
    </main>

    <footer class="site-footer">
      <small>© QuXAT — User • <a href="https://quxat.com/" target="_blank" rel="noopener">Visit quxat.com</a></small>
    </footer>

    <script src="assets/js/storage.js"></script>
    <script src="assets/js/branding.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="assets/js/user.js"></script>
  </body>
  </html>